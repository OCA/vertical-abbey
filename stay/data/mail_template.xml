<?xml version="1.0" encoding="utf-8" ?>
<!--
  Copyright 2020-2021 Akretion France (http://www.akretion.com/)
  @author: Alexis de Lattre <alexis.delattre@akretion.com>
  License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
-->
<odoo noupdate="1">


<record id="stay_notify" model="mail.template">
    <field name="name">Stay: Notify arrivals</field>
    <field name="model_id" ref="stay.model_stay_group" />
    <field
            name="email_from"
        >{{object.company_id.partner_id.email_formatted or user.email_formatted}}</field>
    <field name="partner_to">{{object._mail_template_partner_to()}}</field>
    <field name="auto_delete" eval="False" />
    <field
            name="subject"
        >{{object.name}} - Arrivals of {{format_date(ctx.get('today'))}}</field>
    <field name="body_html" type="html">
<div style="margin: 0px; padding: 0px;">
    <p style="margin: 0px; padding: 0px; font-size: 13px;">
        <table
                        style="border-spacing: 0; border-collapse: collapse; width: 100%; text-align: center;"
                    >
            <tr>
                <th style="padding: 5px; border: 1px solid black;">Guest Name</th>
                <th style="padding: 5px; border: 1px solid black;">Guest Qty</th>
                <th style="padding: 5px; border: 1px solid black;">Arrival Time</th>
                <th style="padding: 5px; border: 1px solid black;">Rooms</th>
                <th style="padding: 5px; border: 1px solid black;">Arrival Note</th>
                <th style="padding: 5px; border: 1px solid black;">Departure Date</th>
            </tr>
            <t t-foreach="object._mail_template_get_stays()" t-as="stay">
            <tr>
                <td style="padding: 5px; border: 1px solid black; text-align: left;"><t
                                        t-out="stay.partner_name"
                                    /></td>
                <td style="padding: 5px; border: 1px solid black;"><t
                                        t-out="stay.guest_qty"
                                    /></td>
                <td style="padding: 5px; border: 1px solid black;"><t
                                        t-out="dict(stay.fields_get('arrival_time', 'selection')['arrival_time']['selection'])[stay.arrival_time]"
                                    /></td>
                <td style="padding: 5px; border: 1px solid black;"><t
                                        t-out="stay.rooms_display_name"
                                    /></td>
                <td style="padding: 5px; border: 1px solid black; text-align: left;"><t
                                        t-out="stay.arrival_note"
                                    /></td>
                <td style="padding: 5px; border: 1px solid black;"><t
                                        t-out="departure_date"
                                    /> <t
                                        t-esc="dict(stay.fields_get('departure_time', 'selection')['departure_time']['selection'])[stay.departure_time]"
                                    /></td>
            </tr>
    </t>
        </table>
    </p>
</div>
    </field>
</record>


</odoo>
